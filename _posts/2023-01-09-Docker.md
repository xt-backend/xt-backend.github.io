---
title: Docker 관련자료
date: 2023-01-06 18:09:00 +0900
categories: [xt, Dev, Docker]
tags: [xt,docker]
---

# Docker 명령어 정리

Docker의 명령어들을 정리해 봅시다 

## Image 관련

### Create

* Docker build -t ImageName:ImageVersion [도커 파일 위치]
  
  * Dockerfile을 사용하여 이미지 생성
  
  * 관련 명령어
    
    * -t : 생성되는 이미지의 Name과 Tag 지정 

* docker commit
  
  * 이전에 있던 Container의 내용 변경이 생길경우 이를 기반으로 새로운 Image 생성

* docker pull ImageName:ImageTag
  
  * 다른 Docker hub에 존재하는 image를 받아와서 새로운 Image 생성
  
  * 관련 명령어
    
    * -a : 지정된 이미지의 모든 Tag 이미지를 Pull
    
    ```docker
    docker pull -a mysql
    ```

### Delete

* Docker rmi Image_Name|Image_Id
  
  * 지정된 이미지 삭제
  
  * 단, 해당 이미지를 사용하여 생성된 Container가 있을 경우 삭제 불가
  
  * 관련 명령어
    
    * -q  / --quiet  와 --filter 사용하여 조건부 이미지 삭제 가능
      
      * repository 혹은 tag가 <none>인 이미지 삭제
      
      ```docker
      docker rmi $(docker images -q --filter "dangling=true")
      ```
      
      * imageName 사용하여 조건에 부합하는 이미지 제거
      
      ```docker
      docker rmi $(docker images -q --filter "reference=ngi*")
      ```
      
      * 특정 이미지 기준 오래된 이미지들 삭제
      
      ```docker
      docker rmi $(docker images -q --filter "before=IMAGE_ID")
      ```
    
    * 추가 관련 자료: 
      
      * [Docker filter 공식자료]([docker images | Docker Documentation](https://docs.docker.com/engine/reference/commandline/images/))
      
      * [Docker filter 활용자료](https://velog.io/@soonbee/docker-image%EB%A5%BC-%EC%82%AD%EC%A0%9C%ED%95%98%EB%8A%94-%EB%8B%A4%EC%96%91%ED%95%9C-%EB%B0%A9%EB%B2%95%EB%93%A4)

 

## Container 관련

### Create

* Docker run -d -p 8080 : 8080 --name MyContainerName ImageId
  
  * -d :  컨테이너 백그라운드에서 실행
  
  * -p : 호스트와 컨테이너 간의 포트 바인딩
  
  * --name : 만들어질 Container의 name 설정
  
  * -volume | -v : volume 설정
    
    * HOST PC의 파일과 Container 내부의 파일 연동
  
  * -e : 환경변수 설정
  
  * -it : 컨테이너 실행후 바로 컨테이너의 쉘 | CLI 접속
  
  * --user: 특정 사용자 계정으로 컨테이너 실행

* 기타 참고자료 : 
  
  * [Docker run 공식문서]([Docker run reference | Docker Documentation](https://docs.docker.com/engine/reference/run/))

### Read

* Docker ps
  
  ```docker
  docker ps options
  ```
  
  * 관련 options
    
    * -a : 가동중, 멈춘 컨테이너등 모든 컨테이너 출력
    
    * -s : 컨테이너의 사용 용량 출력
    
    * -f : Container 목록을 필터링 하여 출력
      
      ```docker
      docker ps -a -f "name=???"
      ```
      
      * 필터링 관련 변수
        
        * id : 컨테이너 ID
        
        * name : 컨테이너 이름
        
        * label: 컨테이너 라벨
        
        * exited: 현재 컨테이너의 상태코드?
          
          * 0 : 종료
          
          * 1 : 실행중?
        
        * status: 컨테이너의 상태
        
        * ancestor: 이미지를 공유받은 컨테이너
        
        * before or since: 특정 컨테이너를 기준으로 이전 / 이후에 만들어진 컨테이너 출력
          
          ```docker
          docker ps -a-f "before=Container name"
          ```
          
          ```docker
          docker ps -a -f "since=Container name"
          ```

* Docker container ls

* Docker logs ContainerId

* Docker exec ContainerId

### Delete

* Docker stop ContainerId

* Docker rm ContainerId

## 그 외

* Docker Search

* Dockerfile 생성 예시
